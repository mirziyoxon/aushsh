<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Unicorner Research — Papers</title>

  <!-- Fonts: a neutral sans + serif for headings (scholar-like) -->
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    /* --------------------
       Design tokens
       -------------------- */
    :root{
      --bg:#fbfbfb;
      --panel:#fff;
      --muted:#6b6b6b;
      --text:#0b0b0b;
      --accent:#0b1724;
      --border:#e8e8e8;
      --max-width:1200px;
      --radius:10px;
    }

    /* Basic reset */
    *{box-sizing:border-box}
    body{margin:0;font-family:"Inter",system-ui,Arial;color:var(--text);background:var(--bg);-webkit-font-smoothing:antialiased}
    a{color:inherit;text-decoration:none}
    button{font-family:inherit}

    /* Page container */
    .wrap{max-width:var(--max-width);margin:36px auto;padding:20px}

    /* Header */
    header.site{display:flex;justify-content:space-between;align-items:flex-end;gap:12px;margin-bottom:18px}
    .brand{display:flex;gap:14px;align-items:center}
    .brand .logo{width:56px;height:56px;border-radius:8px;background:linear-gradient(180deg,#111,#444);color:#fff;display:grid;place-items:center;font-weight:700;font-family:"Merriweather",serif}
    .brand h1{font-family:"Merriweather",serif;margin:0;font-size:22px}
    .brand p{margin:4px 0 0;color:var(--muted);font-size:13px}

    /* Toolbar: search, filters */
    .toolbar{display:flex;gap:12px;align-items:center;margin-top:8px;flex-wrap:wrap}
    .search{flex:1;display:flex;border:1px solid var(--border);background:var(--panel);padding:6px;border-radius:999px;align-items:center;gap:8px}
    .search input{border:0;outline:none;padding:8px 6px;font-size:14px;background:transparent;width:100%}
    .select, .btn{padding:8px 12px;border-radius:8px;border:1px solid var(--border);background:var(--panel);cursor:pointer}
    .btn.primary{background:var(--accent);color:#fff;border:0}
    .filters{display:flex;gap:8px;align-items:center;flex-wrap:wrap}

    /* Layout: main + sidebar */
    .layout{display:grid;grid-template-columns:1fr 320px;gap:22px;margin-top:18px}
    @media (max-width:980px){.layout{grid-template-columns:1fr}}

    /* Paper list styles */
    .list{background:transparent}
    .paper{background:var(--panel);border:1px solid var(--border);border-radius:8px;padding:16px;margin-bottom:12px;display:flex;gap:16px;align-items:flex-start}
    .paper .meta{display:flex;flex-direction:column;gap:6px}
    .paper h3{font-family:"Merriweather",serif;font-size:17px;margin:0}
    .paper .authors{color:var(--muted);font-size:13px}
    .paper .venue{color:var(--muted);font-size:13px}
    .paper .abstract{margin-top:8px;color:#333;font-size:14px}
    .paper .actions{margin-left:auto;display:flex;flex-direction:column;gap:8px;align-items:flex-end}
    .small{font-size:13px;color:var(--muted)}

    /* Tags */
    .tags{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .tag{background:#f3f3f3;padding:6px 8px;border-radius:999px;font-size:12px;border:1px solid #eee;color:var(--muted)}

    /* Sidebar */
    aside.panel{background:var(--panel);border:1px solid var(--border);border-radius:8px;padding:16px;position:sticky;top:20px;height:fit-content}
    .side-section{margin-bottom:16px}
    .side-section h4{margin:0 0 10px 0;font-family:"Merriweather",serif}
    .metric{display:flex;justify-content:space-between;padding:8px 0;border-top:1px dashed #f0f0f0}

    /* Modal (paper detail) */
    .modal-backdrop{position:fixed;inset:0;background:rgba(11,17,23,0.5);display:none;align-items:center;justify-content:center;z-index:50;padding:20px}
    .modal-backdrop.show{display:flex}
    .modal{background:var(--panel);max-width:900px;width:100%;border-radius:10px;padding:20px;max-height:90vh;overflow:auto;border:1px solid var(--border)}
    .modal .top{display:flex;gap:16px}
    .modal h2{font-family:"Merriweather",serif;margin:0}
    .modal .modal-actions{margin-left:auto;display:flex;gap:8px;align-items:center}
    .citation{background:#fafafa;border:1px dashed #eee;padding:12px;border-radius:8px;margin-top:14px;font-family:monospace;font-size:13px;color:#222}

    /* small helpers */
    .muted{color:var(--muted)}
    .center{display:grid;place-items:center}
    .link {color:var(--accent);text-decoration:underline;cursor:pointer}

    /* responsive tweaks */
    @media (max-width:600px){
      .paper{flex-direction:column}
      .paper .actions{align-items:stretch;margin-left:0}
      .search{width:100%}
    }
  </style>
</head>
<body>
  <div class="wrap">

    <!-- Header / Brand -->
    <header class="site">
      <div class="brand">
        <div class="logo" aria-hidden="true">UR</div>
        <div>
          <h1>Unicorner Research</h1>
          <p>Aggregate: SSRN · ResearchGate · Google Scholar — prototype listing & viewer</p>
        </div>
      </div>

      <!-- Simple toolbar: search + sort + tag filters -->
      <div style="width:420px">
        <div class="toolbar">
          <div class="search" role="search" style="flex:1">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="opacity:.6"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
            <input id="q" placeholder="Search title, author, keywords..." aria-label="Search papers">
            <button id="searchBtn" class="select">Search</button>
          </div>

          <select id="sort" class="select" title="Sort papers">
            <option value="new">Sort: Newest</option>
            <option value="cited">Sort: Most cited</option>
            <option value="relevance">Sort: Relevance</option>
          </select>
        </div>
      </div>
    </header>

    <!-- The page layout: list + sidebar -->
    <div class="layout">

      <!-- Main paper list -->
      <main>
        <div id="list" class="list" aria-live="polite">
          <!-- Papers will be injected here by JS -->
        </div>

        <!-- Pagination (simple) -->
        <div id="pager" style="display:flex;gap:8px;justify-content:center;margin-top:14px"></div>

      </main>

      <!-- Sidebar with metrics / filters / saved library -->
      <aside class="panel">
        <div class="side-section">
          <h4>Filters</h4>
          <div style="display:flex;flex-direction:column;gap:8px">
            <label><input type="checkbox" class="tagFilter" value="economics"> Economics</label>
            <label><input type="checkbox" class="tagFilter" value="ai"> AI</label>
            <label><input type="checkbox" class="tagFilter" value="policy"> Policy</label>
            <label><input type="checkbox" class="tagFilter" value="finance"> Finance</label>
          </div>
        </div>

        <div class="side-section">
          <h4>Library</h4>
          <div id="savedList" style="min-height:60px;color:var(--muted)">No saved papers yet.</div>
        </div>

        <div class="side-section">
          <h4>Site metrics</h4>
          <div class="metric"><span>Indexed papers</span><strong id="metricTotal">—</strong></div>
          <div class="metric"><span>Sources</span><strong>SSRN · ResearchGate · Google Scholar</strong></div>
        </div>
      </aside>
    </div>
  </div>

  <!-- Modal for paper details -->
  <div id="modal" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="top">
        <div style="flex:1">
          <h2 id="modalTitle">Paper Title</h2>
          <div class="muted" id="modalAuthors">Author • Affiliation — Year</div>
        </div>
        <div class="modal-actions">
          <button id="saveBtn" class="btn select">Save</button>
          <button id="downloadBtn" class="btn select">Download PDF</button>
          <button id="closeModal" class="btn">Close</button>
        </div>
      </div>

      <div style="margin-top:14px">
        <h4 style="margin:0 0 6px 0">Abstract</h4>
        <p id="modalAbstract" style="margin:0 0 10px 0;color:#222;line-height:1.5"></p>

        <div class="tags" id="modalTags"></div>

        <div style="margin-top:14px">
          <strong>External Links</strong>
          <ul id="modalLinks" style="margin-top:8px;color:var(--muted)"></ul>
        </div>

        <div style="margin-top:14px">
          <strong>Citation</strong>
          <div class="citation" id="modalCitation"></div>
          <div style="margin-top:8px;display:flex;gap:8px">
            <button id="bibBtn" class="btn select">Copy BibTeX</button>
            <button id="risBtn" class="btn select">Copy RIS</button>
            <button id="plainBtn" class="btn select">Copy plaintext</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* ======================================================
       Sample dataset
       Replace these sample papers with real entries (SSRN / RG / Google Scholar links)
       Each paper object includes:
       - id, title, authors (array), year, venue, abstract, tags (array)
       - pdf (URL), links: {ssrn, researchgate, scholar}
       - citations (simulated count)
       ====================================================== */
    const PAPERS = [
      {
        id:'p1',
        title:'Structural Change and Growth: A Multi-sectoral Approach',
        authors:[{name:'A. Researcher',aff:'Harvard University'},{name:'B. Economist',aff:'LSE'}],
        year:2024,
        venue:'Journal of Development Economics',
        abstract:'This paper examines structural change using a multi-sector dynamic model. We estimate ... (sample abstract).',
        tags:['economics','policy'],
        pdf:'/pdfs/structural_change.pdf',
        links:{
          ssrn:'https://ssrn.com/abstract=1234567',
          researchgate:'https://www.researchgate.net/publication/1234567',
          scholar:'https://scholar.google.com/scholar?q=Structural+Change+and+Growth'
        },
        citations:128
      },
      {
        id:'p2',
        title:'Machine Learning for Macro-Forecasting',
        authors:[{name:'C. Data',aff:'MIT'},{name:'D. Stat',aff:'Stanford'}],
        year:2023,
        venue:'SSRN Working Paper',
        abstract:'We apply a suite of machine learning models to macroeconomic forecasting tasks and show ...',
        tags:['ai','finance'],
        pdf:'/pdfs/ml_macro.pdf',
        links:{
          ssrn:'https://ssrn.com/abstract=2345678',
          researchgate:'https://www.researchgate.net/publication/2345678',
          scholar:'https://scholar.google.com/scholar?q=Machine+Learning+for+Macro-Forecasting'
        },
        citations:54
      },
      {
        id:'p3',
        title:'Fiscal Policy and Inequality',
        authors:[{name:'E. Policy',aff:'Oxford'}],
        year:2021,
        venue:'Policy Research Working Paper',
        abstract:'An empirical analysis of fiscal instruments and their distributional consequences ...',
        tags:['policy','finance'],
        pdf:'/pdfs/fiscal_policy.pdf',
        links:{
          ssrn:'https://ssrn.com/abstract=3456789',
          researchgate:'https://www.researchgate.net/publication/3456789',
          scholar:'https://scholar.google.com/scholar?q=Fiscal+Policy+and+Inequality'
        },
        citations:210
      }
    ];

    /* ====== State ====== */
    let filtered = [...PAPERS]; // current filtered list
    const perPage = 6;
    let page = 1;

    /* ====== Helpers ====== */

    // Create a short author string for display
    function authorsText(authors){
      return authors.map(a=>a.name).join(', ');
    }

    // Render tags into a container
    function renderTags(container, tags){
      container.innerHTML = '';
      tags.forEach(t=>{
        const el = document.createElement('div');
        el.className = 'tag';
        el.textContent = t;
        container.appendChild(el);
      });
    }

    // Format citation in simple APA-ish and BibTeX
    function makeCitation(p){
      const authorNames = p.authors.map(a=>a.name).join(' & ');
      const apa = `${authorNames} (${p.year}). ${p.title}. ${p.venue}.`;
      const bib = `@article{${p.id},\n  title={${p.title}},\n  author={${p.authors.map(a=>a.name).join(' and ')}},\n  journal={${p.venue}},\n  year={${p.year}}\n}`;
      const ris = `TY  - JOUR\nTI  - ${p.title}\nAU  - ${p.authors.map(a=>a.name).join('\\nAU  - ')}\nPY  - ${p.year}\nJO  - ${p.venue}\nER  -`;
      return {apa,bib,ris};
    }

    /* ====== Rendering paper list ====== */
    const listEl = document.getElementById('list');
    const metricTotal = document.getElementById('metricTotal');
    const savedListEl = document.getElementById('savedList');

    function renderList(){
      listEl.innerHTML = '';
      metricTotal.textContent = PAPERS.length;

      // pagination logic (basic)
      const start = (page-1)*perPage;
      const pageItems = filtered.slice(start, start+perPage);

      if(pageItems.length === 0){
        listEl.innerHTML = '<div class="center muted" style="padding:40px">No papers found.</div>';
        renderPager();
        return;
      }

      pageItems.forEach(p=>{
        const item = document.createElement('article');
        item.className = 'paper';
        // Left column: basic metadata and abstract
        const left = document.createElement('div');
        left.className = 'meta';
        left.style.flex = '1';

        const title = document.createElement('h3');
        title.innerHTML = `<a href="#" data-id="${p.id}" class="open">${p.title}</a>`;
        left.appendChild(title);

        const aLine = document.createElement('div');
        aLine.className = 'authors';
        // Authors clickable for popover (simple hover)
        aLine.innerHTML = authorsText(p.authors) + ` · <span class="small">${p.year}</span>`;
        left.appendChild(aLine);

        const venue = document.createElement('div');
        venue.className = 'venue small';
        venue.textContent = p.venue + ' · ' + p.citations + ' citations';
        left.appendChild(venue);

        const abs = document.createElement('p');
        abs.className = 'abstract';
        abs.textContent = p.abstract.length>220? p.abstract.slice(0,220)+'…' : p.abstract;
        left.appendChild(abs);

        renderTags(left, p.tags);

        // Right column: actions
        const right = document.createElement('div');
        right.className = 'actions';

        // Open / details button
        const openBtn = document.createElement('button');
        openBtn.className = 'btn select';
        openBtn.textContent = 'Details';
        openBtn.onclick = ()=>openModal(p.id);
        right.appendChild(openBtn);

        // Download PDF
        const dl = document.createElement('a');
        dl.className = 'btn';
        dl.textContent = 'PDF';
        dl.href = p.pdf;
        dl.target = '_blank';
        dl.rel = 'noopener';
        right.appendChild(dl);

        // External links: SSRN / RG / Scholar
        const ext = document.createElement('div');
        ext.style.marginTop = '8px';
        ext.innerHTML = `
          <a class="small link" href="${p.links.ssrn}" target="_blank" rel="noopener">SSRN</a>
          &nbsp;·&nbsp;
          <a class="small link" href="${p.links.researchgate}" target="_blank" rel="noopener">ResearchGate</a>
          &nbsp;·&nbsp;
          <a class="small link" href="${p.links.scholar}" target="_blank" rel="noopener">Google Scholar</a>
        `;
        right.appendChild(ext);

        item.appendChild(left);
        item.appendChild(right);

        listEl.appendChild(item);
      });

      renderPager();
      attachOpenHandlers();
    }

    /* ====== Pager (simple prev/next) ====== */
    function renderPager(){
      const pager = document.getElementById('pager');
      pager.innerHTML = '';
      const pages = Math.ceil(filtered.length / perPage) || 1;

      const prev = document.createElement('button');
      prev.className = 'btn';
      prev.textContent = 'Prev';
      prev.disabled = page <= 1;
      prev.onclick = ()=>{ page = Math.max(1, page-1); renderList(); };
      pager.appendChild(prev);

      const info = document.createElement('div');
      info.className = 'small muted';
      info.style.alignSelf = 'center';
      info.textContent = `Page ${page} of ${pages}`;
      pager.appendChild(info);

      const next = document.createElement('button');
      next.className = 'btn';
      next.textContent = 'Next';
      next.disabled = page >= pages;
      next.onclick = ()=>{ page = Math.min(pages, page+1); renderList(); };
      pager.appendChild(next);
    }

    /* ====== Open detail modal ====== */
    const modalWrap = document.getElementById('modal');
    const modalTitle = document.getElementById('modalTitle');
    const modalAuthors = document.getElementById('modalAuthors');
    const modalAbstract = document.getElementById('modalAbstract');
    const modalTags = document.getElementById('modalTags');
    const modalLinks = document.getElementById('modalLinks');
    const modalCitation = document.getElementById('modalCitation');
    const downloadBtn = document.getElementById('downloadBtn');
    const saveBtn = document.getElementById('saveBtn');

    function openModal(id){
      const p = PAPERS.find(x=>x.id===id);
      if(!p) return;
      modalTitle.textContent = p.title;
      modalAuthors.textContent = p.authors.map(a=>a.name+' ('+a.aff+')').join(' · ') + ' — ' + p.year;
      modalAbstract.textContent = p.abstract;
      renderTags(modalTags, p.tags);
      modalLinks.innerHTML = '';
      Object.entries(p.links).forEach(([k,v])=>{
        const li = document.createElement('li');
        li.innerHTML = `<a href="${v}" target="_blank" rel="noopener">${k.toUpperCase()}</a>`;
        modalLinks.appendChild(li);
      });
      // citation blocks
      const c = makeCitation(p);
      modalCitation.textContent = c.apa;
      // wire download and save
      downloadBtn.onclick = ()=> window.open(p.pdf,'_blank');
      saveBtn.onclick = ()=> toggleSave(p.id);
      // show modal
      modalWrap.classList.add('show');
      modalWrap.setAttribute('aria-hidden','false');
      // set copy handlers
      document.getElementById('bibBtn').onclick = ()=> copyText(c.bib);
      document.getElementById('risBtn').onclick = ()=> copyText(c.ris);
      document.getElementById('plainBtn').onclick = ()=> copyText(c.apa);
      updateSavedListUI();
    }

    // Close modal
    document.getElementById('closeModal').onclick = ()=> closeModal();
    modalWrap.addEventListener('click', (e)=> { if(e.target === modalWrap) closeModal(); });
    function closeModal(){ modalWrap.classList.remove('show'); modalWrap.setAttribute('aria-hidden','true'); }

    // Attach open handlers for title links
    function attachOpenHandlers(){
      document.querySelectorAll('.open').forEach(a=>{
        a.onclick = (e)=>{ e.preventDefault(); const id = a.dataset.id; openModal(id); };
      });
    }

    /* ====== Search / sort / filter ====== */
    document.getElementById('searchBtn').addEventListener('click', ()=> applyFilters());
    document.getElementById('q').addEventListener('keydown', (e)=>{ if(e.key==='Enter') applyFilters(); });
    document.getElementById('sort').addEventListener('change', ()=> applyFilters());

    function applyFilters(){
      const q = document.getElementById('q').value.trim().toLowerCase();
      // tags
      const checked = [...document.querySelectorAll('.tagFilter:checked')].map(i=>i.value);
      // filter
      filtered = PAPERS.filter(p=>{
        // tag filter: if any tags are checked, paper must include them (all checked or any? here we require any)
        if(checked.length && !p.tags.some(t=>checked.includes(t))) return false;
        if(!q) return true;
        // search in title, authors, abstract, tags
        const hay = (p.title + ' ' + p.authors.map(a=>a.name).join(' ') + ' ' + p.abstract + ' ' + p.tags.join(' ')).toLowerCase();
        return hay.includes(q);
      });
      // sorting
      const sort = document.getElementById('sort').value;
      if(sort === 'new') filtered.sort((a,b)=>b.year-a.year);
      if(sort === 'cited') filtered.sort((a,b)=>b.citations-b.citations);
      // reset to first page
      page = 1;
      renderList();
    }

    /* ====== Save / library (localStorage) ====== */
    function getSaved(){ try{ return JSON.parse(localStorage.getItem('uc_saved')||'[]'); }catch(e){return []} }
    function savePaper(id){
      const s = getSaved();
      if(!s.includes(id)) { s.push(id); localStorage.setItem('uc_saved', JSON.stringify(s)); }
      updateSavedListUI();
    }
    function removeSaved(id){
      let s = getSaved(); s = s.filter(x=>x!==id); localStorage.setItem('uc_saved', JSON.stringify(s)); updateSavedListUI();
    }
    function toggleSave(id){
      const s = getSaved();
      if(s.includes(id)) removeSaved(id); else savePaper(id);
      updateSavedListUI();
    }
    function updateSavedListUI(){
      const s = getSaved();
      if(s.length === 0){ savedListEl.innerHTML = '<span class="muted">No saved papers.</span>'; return; }
      savedListEl.innerHTML = '';
      s.forEach(id=>{
        const p = PAPERS.find(x=>x.id===id);
        if(!p) return;
        const div = document.createElement('div');
        div.style.marginBottom = '8px';
        div.innerHTML = `<strong style="display:block">${p.title}</strong><span class="small muted">${p.authors.map(a=>a.name).join(', ')}</span>
                         <div style="margin-top:6px"><button class="btn" style="margin-right:6px" onclick="openModal('${p.id}')">View</button>
                         <button class="btn" onclick="removeSaved('${p.id}')">Remove</button></div>`;
        savedListEl.appendChild(div);
      });
    }

    /* ====== Utility: copy to clipboard ====== */
    async function copyText(text){
      try{
        await navigator.clipboard.writeText(text);
        alert('Copied to clipboard');
      }catch(e){
        // fallback
        prompt('Copy the citation', text);
      }
    }

    /* ====== Init render ====== */
    renderList();
    updateSavedListUI();

    // small accessibility: focus search input on load
    document.getElementById('q').focus();

  </script>
</body>
</html>
